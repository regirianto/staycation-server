<% include ../../partials/header %>

  <% include ../../partials/sidebar %>

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <% include ../../partials/navbar %>

          <!-- Begin Page Content -->
          <div class="container-fluid">
            <!-- Page Heading -->
            <div class="row d-flex align-items-center ">
              <div class="col-md-6">
                <h1 class="h3 text-gray-800">Booking Detail Page</h1>
              </div>
              <div class="col-md-6">
                <ol class="breadcrumb bg-transparent d-flex justify-content-md-end">
                  <li class="breadcrumb-item"><a href="/" class="text-decoration-none">Home</a></li>
                  <li class="breadcrumb-item active">Booking</li>
                </ol>
              </div>
            </div>
            <div class="row flex-column">
              <div class="col-md text-center">
                <a href="<%= booking.proofPayment %>" data-toggle="lightbox">
                  <img src="<%= booking.proofPayment %>" alt="" width="400" >
                </a>
                <% if (booking.status == 'pending') { %>
                  <div class="d-flex justify-content-center align-items-center my-4">
                    <form action="/booking/<%= booking._id %>?status=success&_method=PUT" method="post">
                      <button class="btn btn-success mr-4">Accept</button>
                    </form>
                    <form action="/booking/<%= booking._id %>?status=failed&_method=PUT" method="post">
                      <button class="btn btn-danger ">Reject</button>
                    </form>
                  </div>
                <% } %>
              </div>
              <div class="col-md">
                <div class="table-responsive">
                  <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                      <tr>
                        <th>Invoice</th>
                        <th>Item</th>
                        <th>Customer</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Booking Start</th>
                        <th>Booking End</th>
                        <th>Duration</th>
                        <th>Bank From</th>
                        <th>Bank Account Holder</th>
                        <th>Status</th>
                        <th>Total</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          <%= booking.invoice %>
                        </td>
                        <td>
                          <%= booking.item.title %>
                        </td>
                        <td>
                          <%= booking.name %>
                        </td>
                        <td>
                          <%= booking.email %>
                        </td>
                        <td>
                          <%= booking.phoneNumber %>
                        </td>
                        <td>
                          <%= booking.bookingStartDate.toLocaleString('id-ID').split(' ')[0].split('/').join('-') %>
                        </td>
                        <td>
                          <%= booking.bookingEndDate.toLocaleString('id-ID').split(' ')[0].split('/').join('-') %>
                        </td>
                        <td>
                          <%= booking.duration %> Night
                        </td>
                        <td>
                          <%= booking.bankFrom %>
                        </td>
                        <td>
                          <%= booking.accountHolder %>
                        </td>
                        <td>
                          <button disabled class="text-capitalize btn btn-sm <%= booking.status == 'success' ? 'btn-success' : booking.status == 'failed' ? 'btn-danger' : 'btn-warning' %>"><%= booking.status %></button>
                        </td>
                        <td>
                          <%=new Intl.NumberFormat('en-US', { style: 'currency' , currency: 'USD' }).format(booking.total) %>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <!-- /.container-fluid -->
      </div>
      <!-- End of Main Content -->

      <% include ../../partials/footer %>
    </div>
    <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->


    <% include ../../partials/end %>